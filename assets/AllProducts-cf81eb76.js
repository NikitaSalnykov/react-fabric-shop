import{a as D,u as a,s as E,t as T,D as A,r as f,C as N,E as I,F as R,G as z,H as B,I as G,w as H,j as e,L as J,X as K,T as U,S as W,Y as X,J as Y,K as q,M as O,x as Q}from"./index-39d2c7f3.js";import{F as V}from"./Filter-4217685f.js";const Z=({title:P})=>{const o=D(),i=a(E),C=a(T),u=a(A),[c,j]=f.useState(a(N)||[]),F=a(N),p=a(I),m=a(R),w=a(z),b=a(B),L=a(G),[v,_]=f.useState(1),n=12,S=t=>{_(t.selected+1)},M=t=>{F.some(s=>s._id===t._id)?(o(q(t._id)),j(c.filter(s=>s._id!==t._id))):(o(O(t)),j([...c,t]))},y=t=>d(t).slice((v-1)*n,v*n),x=t=>{if(!i)return t;const s=m.replace(/\D/g,"");return console.log("filterPrice",m),t.filter(l=>{const g=l.name.toLowerCase().includes(u.toLowerCase()),r=p==="Все категории"||l.category.toLowerCase().includes(p.toLowerCase()),h=w==="Все цвета"||l.color.toLowerCase().includes(w.toLowerCase()),k=!b||l.discount>0,$=m===""||+l.price<s;return g&&r&&h&&k&&$})};f.useEffect(()=>{o(H())},[o]);const d=t=>{if(!L)return x(t);const s=t.map(r=>({timestamp:new Date(r.createdAt).getTime(),product:r}));console.log(s);const g=s.sort((r,h)=>h.timestamp-r.timestamp).map(r=>r.product);return x(g)};return console.log(x(i)),e.jsx("div",{className:"md:min-h-[400px]",children:e.jsxs("div",{className:"mx-auto max-w-2xl lg:max-w-7xl",children:[e.jsx("h2",{className:"mb-6 text-xl font-bold tracking-tight text-red-900 sm:text-2xl ",children:P}),y(i)&&!C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" grid grid-cols-2 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8 ",children:y(i).map(t=>e.jsxs("div",{className:"relative",children:[e.jsxs(J,{to:`/categories/${K(t.category)}/${t._id}`,className:"group",children:[e.jsx("div",{className:"shadow-md h-[200px] md:h-[250px] md:h-300px aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-lg bg-gray-200 xl:aspect-h-8 xl:aspect-w-7",children:e.jsx("img",{src:t.mainPhoto,alt:t.name,className:"h-full w-full object-cover object-center group-hover:opacity-75 sm:h-[280px]"})}),e.jsx("h3",{className:"mt-4 text-sm text-gray-700",children:t.name}),e.jsx("p",{className:"mt-1 text-sm font-medium text-gray-900",children:t.category})]},t._id),e.jsx("div",{className:"mt-2",children:e.jsx(U,{product:t})}),t.discount>0&&e.jsx("div",{className:"absolute top-4 w-12 h-12 rounded-full bg-red flex justify-center items-center cursor-pointer  left-4 ",children:e.jsxs("p",{className:"flex justify-center items-center gap-[1px] text-white font-semibold",children:[e.jsx("span",{className:" text-[10px]",children:"-"}),t.discount,e.jsx("span",{className:" text-[10px]",children:"%"})]})}),e.jsx("div",{onClick:()=>M(t),className:`absolute top-4 right-4 w-10 h-10 rounded-full bg-white flex justify-center items-center  ${c.some(s=>s._id===t._id)?" opacity-80":"opacity-40"} hover:opacity-80 cursor-pointer `,children:e.jsx(W,{id:"icon-favorite-product",size:22,fill:`${c.some(s=>s._id===t._id)?"red":"gray"}`,stroke:`${c.some(s=>s._id===t._id)?"red":"gray"}`})})]}))}),Math.ceil(d(i).length/n)>1&&e.jsx(X,{handleClickPage:S,totalPages:Math.ceil(d(i).length/n)})]}):e.jsx("div",{children:e.jsx(Y,{})}),d(i).length<=0&&e.jsx("div",{className:"w-full flex justify-center items-center mt-4",children:e.jsxs("p",{children:["По запросу ",e.jsx("span",{className:" font-bold",children:u})," ничего не найдено."]})})]})})},se=()=>e.jsxs("div",{className:"container",children:[e.jsx(Q,{}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl pb-4",children:"Весь ассортимент:"}),e.jsx(V,{nameFilter:!0,filterColor:!0,filterCategory:!0,filterPrice:!0,filterNew:!0,filterSale:!0})]}),e.jsx(Z,{})]})]});export{se as default};
