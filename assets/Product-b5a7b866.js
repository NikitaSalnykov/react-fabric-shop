import{r as x,j as e,S as E,N as P,a as A,b as D,c as L,u as h,g as R,d as y,f as O,e as V,h as Z,i as T,k as F,l as q,m as U,n as _,o as $,p as W,q as G,s as H,t as J,B as I,v as B,w as K,x as Q,y as X,z as Y,A as ee,P as se,L as te,C as le,D as ae}from"./index-f9f5b1b2.js";/* empty css                         */const re=({images:s,id:m,name:o})=>{const n=x.useRef(null),c=x.useRef(null);return e.jsx(e.Fragment,{children:s&&e.jsxs(E,{className:"flex justify-center items-center lg:w-[800px]",modules:[P,A,P],navigation:{prevEl:n.current,nextEl:c.current},loop:!0,spaceBetween:50,slidesPerView:1,children:[s.map((i,l)=>e.jsx(D,{className:"mb-5 w-full",style:{display:"flex"},children:e.jsx("div",{className:"flex w-full justify-center items-center",children:e.jsx("div",{className:"h-[450px] w-[450px] md:h-[550px]  md:w-[650px] flex items-center justify-center",children:e.jsx("img",{className:"shadow-md w-full h-full overflow-hidden object-cover",src:i,alt:o})})})},l)),e.jsx("button",{className:"flex justify-center items-center absolute z-10 top-[50%] w-[25px] h-[25px] bg-black rounded-[50%]  left-[10px] opacity-70",ref:n,children:e.jsx("div",{className:" rotate-180",children:e.jsx(L,{id:"icon-arrow",size:24,stroke:"white",fill:"white"})})}),e.jsx("button",{className:"flex justify-center items-center absolute z-10 top-[50%] w-[25px] h-[25px] bg-black  opacity-70 rounded-[50%] right-[10px] ",ref:c,onClick:()=>console.log(1),children:e.jsx(L,{id:"icon-arrow",size:24,stroke:"white",fill:"white"})})]})})},ne=()=>e.jsxs("div",{className:"container pt-6 animate-pulse",children:[e.jsx("div",{className:"w-full lg:w-1/3 h-12 lg:h-6 bg-slate-200 mb-8"}),e.jsx("div",{className:"mx-auto bg-slate-200 h-[450px] w-full md:h-[550px]  md:w-[650px] flex items-center justify-center"}),e.jsxs("div",{className:"mx-auto max-w-2xl pt-10 lg:grid lg:max-w-7xl lg:grid-cols-3 lg:grid-rows-[auto,auto,1fr] lg:gap-x-8 lg:pt-16",children:[e.jsxs("div",{className:"lg:col-span-2 lg:border-r lg:border-gray-200 lg:pr-8",children:[e.jsx("div",{className:"h-6 w-1/2 bg-slate-200"}),e.jsx("div",{className:"mt-8 h-20 w-1/2 bg-slate-200"})]}),e.jsxs("div",{className:"mt-4 lg:row-span-3 lg:mt-0",children:[e.jsx("div",{className:"h-6 w-1/3 bg-slate-200"}),e.jsx("div",{className:"mt-4 h-6 w-1/2 bg-slate-200"}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-5 w-[60%] bg-slate-200"}),e.jsx("div",{className:"flex flex-wrap gap-4 ",children:e.jsxs("div",{className:"mt-8 w-full h-14 flex overflow-hidden gap-4",children:[e.jsx("div",{className:"w-[50px] h-[50px]  rounded-[90px] bg-slate-200 object-cover"}),e.jsx("div",{className:"w-[50px] h-[50px]  rounded-[90px] bg-slate-200 object-cover"}),e.jsx("div",{className:"w-[50px] h-[50px]  rounded-[90px] bg-slate-200 object-cover"})]})})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"h-4 w-1/3 bg-slate-200"})}),e.jsx("div",{className:" mt-4 custom-number-input h-10 w-32 pt-2 bg-slate-200"})]}),e.jsx("div",{className:"bg-slate-200 mt-10 w-[70%] h-12 mx-auto"})]})]})]})]}),ie=({review:s,openCommentModal:m,openImageModal:o})=>{const[n,c]=x.useState(!1),i=h(R),l=y();return e.jsxs("article",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-bold text-xl",children:s.author}),e.jsxs("div",{className:"flex items-center mb-1 space-x-1 rtl:space-x-reverse",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:s.rating>=1?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})}),e.jsx("svg",{className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:s.rating>=2?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})}),e.jsx("svg",{className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:s.rating>=3?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})}),e.jsx("svg",{className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:s.rating>=4?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})}),e.jsx("svg",{className:"w-4 h-4 text-gray-300 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:s.rating>=5?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})]})]}),e.jsx("div",{className:"mb-5 text-sm ",children:e.jsxs("p",{className:"text-gray-500",children:["Отзыв оставлен: ",e.jsx("span",{children:O(s.createdAt)})]})}),e.jsx("div",{className:"flex items-center mb-2",children:e.jsxs("p",{children:[s.text.split("").length>=250&&!n?s.text.split("").slice(0,250):s.text,s.text.split("").length>=250&&!n&&e.jsx("span",{onClick:()=>c(!n),className:" cursor-pointer text-sm font-medium text-blue-600 hover:underline ",children:"...Ещё"})]})}),s.text.split("").length>=250&&n&&e.jsx("button",{onClick:()=>c(!n),className:"block text-sm font-medium text-blue-600 hover:underline ",children:"Свернуть"}),s.extraPhotos&&s.extraPhotos.length>0&&e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 opacity-70",children:[e.jsx(L,{id:"icon-clip",size:16}),e.jsx("p",{className:" font-semibold text-sm",children:"Прикрепленные фотографии:"})]}),e.jsx("ul",{className:"flex flex-wrap gap-4",children:s.extraPhotos&&s.extraPhotos.map((r,u)=>e.jsx("li",{onClick:()=>o(r),className:"w-[100px] h-[100px] overflow-hidden cursor-pointer hover:translate-y-[1px] hover:opacity-70",children:e.jsx("img",{className:"h-full max-w-full rounded-lg object-cover",src:r,alt:"attached photo"})},u))})]}),e.jsxs("div",{className:"flex flex-row-reverse gap-4",children:[i&&(i._id===s.authorId||i.role==="admin")&&e.jsx("button",{onClick:()=>l(V(s._id)),className:" cursor-pointer text-sm font-medium text-rose-700 hover:underline ",children:"Удалить"}),i&&i.role==="admin"&&e.jsx("button",{onClick:()=>m(s._id),className:" cursor-pointer text-sm font-medium hover:underline ",children:"Ответить"})]})]}),s.comments&&s.comments.length>0&&s.comments.map(r=>r&&e.jsxs("div",{className:"ml-8 pl-4 border-l-[3px] mt-4",children:[e.jsx("p",{className:"font-bold text-xl ",children:"Ответ Администратора"}),e.jsx("div",{className:"mb-5 text-sm ",children:e.jsxs("p",{className:"text-gray-500",children:["Ответ оставлен:"," ",e.jsx("span",{children:O(s.createdAt)})]})}),e.jsx("div",{className:"flex items-center mb-2",children:e.jsxs("p",{children:[r.comment.split("").length>=250&&!n?r.comment.split("").slice(0,250):r.comment,r.comment.split("").length>=250&&!n&&e.jsx("span",{onClick:()=>c(!n),className:" cursor-pointer text-sm font-medium text-blue-600 hover:underline ",children:"...Ещё"})]})}),r.comment.split("").length>=250&&n&&e.jsx("button",{onClick:()=>c(!n),className:"block text-sm font-medium text-blue-600 hover:underline ",children:"Свернуть"}),i&&i.role==="admin"&&e.jsx("div",{className:"mt-1 text-right",children:e.jsx("button",{onClick:()=>l(Z({reviewId:s._id,commentId:r._id})),className:" cursor-pointer text-sm font-medium text-rose-700 hover:underline ",children:"Удалить"})})]},r._id))]})},oe=T({author:F().min(2,"Имя должно содержать минимум 2 символа").max(16,"Имя должно содержать максимум 16 символов").required("Укажите имя"),text:F().min(40,"Отзыв должен содержать минимум 40 символов").max(450,"Отзыв должен содержать максимум 16 символов").required("Оставьте отзыв"),extraPhotos:q().test("maxFiles","Максимальное количество файлов - 3",s=>s?s.length<=3:!0).nullable(),rating:U().min(1,"Поставьте оценку").max(5,"Оценка должна быть не более 5")}),ce=s=>s.reviews.reviews,S=s=>s.reviews.isLoading,z=s=>s.reviews.isReviewCreated,C="pl-4 absolute  text-rose-500 text-xs font-normal left-[-20px] bottom-[-15px] xl:left-[85px]",k="text-neutral-900 text-sm font-semibold font-['Manrope'] tracking-wide mdOnly:text-[16px] ",de=({onCloseModal:s,productId:m})=>{const o=h(R),n=y(),c=h(S),i=h(z);x.useEffect(()=>{i&&(console.log(1),s(),n(_()))},[i,s,n]);const l=$({initialValues:{author:o&&`${o.name} ${o.surname}`||"",text:"",extraPhotos:null,rating:0},validateOnChange:!1,validateOnBlur:!0,validationSchema:oe,onSubmit:({rating:t,text:d,author:p,extraPhotos:v})=>{const j={text:d,author:p,extraPhotos:v,rating:t,productId:m,authorId:""};o&&(j.authorId=o._id);const w=f(j);n(W(w))}}),r=l.errors,u=l.values,f=t=>{const d=new FormData;return d.append("text",t.text),d.append("rating",t.rating),d.append("author",t.author),d.append("productId",t.productId),t.authorId&&d.append("authorId",t.authorId),t.extraPhotos&&[...t.extraPhotos].forEach(p=>{d.append("extraPhotos",p)}),d};return e.jsxs("div",{className:" text-center smOnly:px-3 md:px-5 rounded-3xl",children:[e.jsx("h3",{className:"text-neutral-900 text-2xl mb-11 font-medium font-['Manrope'] tracking-wide ",children:"Оставить отзыв"}),e.jsx("div",{className:"",children:e.jsx("form",{noValidate:!0,autoComplete:"off",className:"flex flex-col flex-wrap-reverse",onSubmit:l.handleSubmit,children:e.jsxs("div",{className:"flex-row-reverse w-[275px] md:w-[500px]",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"relative flex flex-col gap-2 justify-between",children:[e.jsx("label",{className:k,htmlFor:"color",children:"Ваше имя:"}),e.jsx("input",{className:`flex w-[100%] h-[100%] px-[16px] py-[8px] border border-blue rounded-[10px] ${r.author&&"border-rose-400"}`,type:"text",id:"author",name:"author",placeholder:"Введите имя",value:u.author,onChange:l.handleChange}),r.author&&e.jsx("p",{className:C,children:r.author})]}),e.jsx("div",{className:"flex-col",children:e.jsxs("div",{className:"flex flex-col gap-2 justify-start w-full relative",children:[e.jsx("label",{className:k,htmlFor:"text",children:"Отзыв:"}),e.jsx("textarea",{className:`flex w-[100%] h-[200px] px-[16px] py-[8px] border border-blue rounded-[10px] resize-none ${r.text&&"border-rose-400"}`,type:"text",id:"text",name:"text",placeholder:"Введите отзыв",value:u.text,onChange:l.handleChange}),r.text&&e.jsx("p",{className:C,children:r.text})]})}),e.jsxs("div",{className:"flex items-center gap-2 relative",children:[e.jsx("p",{className:k,htmlFor:"text",children:"Оценка:"}),e.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[e.jsx("div",{className:" cursor-pointer",children:e.jsx("svg",{onClick:()=>l.setFieldValue("rating",1),className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:l.values.rating>=1?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})}),e.jsx("div",{className:"cursor-pointer",children:e.jsx("svg",{onClick:()=>l.setFieldValue("rating",2),className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:l.values.rating>=2?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})}),e.jsx("div",{className:"cursor-pointer",children:e.jsx("svg",{onClick:()=>l.setFieldValue("rating",3),className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:l.values.rating>=3?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})}),e.jsx("div",{className:"cursor-pointer",children:e.jsx("svg",{onClick:()=>l.setFieldValue("rating",4),className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:l.values.rating>=4?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})}),e.jsx("div",{className:"cursor-pointer",children:e.jsx("svg",{onClick:()=>l.setFieldValue("rating",5),className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:l.values.rating>=5?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})}),r.rating&&e.jsx("p",{className:`${C} left-[-23px] bottom-[-15px]`,children:r.rating})]})]}),e.jsxs("div",{className:"flex flex-col justify-between relative items-center gap-2",children:[e.jsx("label",{className:k,htmlFor:"extraPhotos",children:"Прикрепить фото:"}),e.jsx("input",{className:"w-full",type:"file",id:"extraPhotos",name:"extraPhotos",accept:"image/jpeg, image/png",multiple:!0,onChange:t=>{const d=t.target.files;l.setFieldValue("extraPhotos",d)}}),r.extraPhotos&&e.jsx("p",{className:`${C} left-[-20px] bottom-[-20px]`,children:r.extraPhotos})]})]}),e.jsx("div",{className:" smOnly:flex smOnly:flex-col smOnly:items-center smOnly:gap-2 } mt-12 ",children:c?e.jsx("div",{children:"Loading"}):e.jsxs("button",{type:"submit",disabled:!1,className:`"Frame36 hover:blue-gradient hover:text-white smOnly:h-10 h-10 px-5 py-2 rounded-3xl border-2 border-blue justify-center items-center gap-2 inline-flex  text-blue text-base font-bold font-['Manrope'] tracking-wide"`,children:["Добавить"," "]})})]})})})]})},xe="pl-4 absolute  text-rose-500 text-xs font-normal top-18 left-[0px] xl:left-[85px]",me="text-neutral-900 text-sm font-semibold font-['Manrope'] tracking-wide mdOnly:text-[16px] ",he=({onCloseModal:s,reviewId:m})=>{const o=h(R),n=y(),c=h(S),i=h(z);x.useEffect(()=>{i&&(s(),n(_()))},[i,s,n]);const l=$({initialValues:{author:`${o.name} ${o.surname}`||"",comment:""},validateOnChange:!1,validateOnBlur:!0,onSubmit:({author:f,comment:t})=>{n(G({reviewId:m,post:{comment:t,author:f}}))}}),r=l.errors,u=l.values;return e.jsxs("div",{className:" text-center smOnly:px-3 md:px-5 rounded-3xl",children:[e.jsx("h3",{className:"text-neutral-900 text-2xl mb-11 font-medium font-['Manrope'] tracking-wide ",children:"Ответить"}),e.jsx("div",{className:"",children:e.jsx("form",{noValidate:!0,autoComplete:"off",className:"flex flex-col flex-wrap-reverse",onSubmit:l.handleSubmit,children:e.jsxs("div",{className:"flex-row-reverse w-[275px] md:w-[500px]",children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx("div",{className:"flex-col",children:e.jsxs("div",{className:"flex flex-col gap-2 justify-start w-full relative",children:[e.jsx("label",{className:me,htmlFor:"comment",children:"Комментарий:"}),e.jsx("textarea",{className:`flex w-[100%] h-[200px] px-[16px] py-[8px] border border-blue rounded-[10px] resize-none ${r.comment&&"border-rose-400"}`,type:"comment",id:"comment",name:"comment",placeholder:"Введите отзыв",value:u.comment,onChange:l.handleChange}),r.comment&&e.jsx("p",{className:xe,children:r.comment})]})})}),e.jsx("div",{className:" smOnly:flex smOnly:flex-col smOnly:items-center smOnly:gap-2 } mt-12 ",children:c?e.jsx("div",{children:"Loading"}):e.jsxs("button",{type:"submit",disabled:!1,className:`"Frame36 hover:blue-gradient hover:text-white smOnly:h-10 h-10 px-5 py-2 rounded-3xl border-2 border-blue justify-center items-center gap-2 inline-flex  text-blue text-base font-bold font-['Manrope'] tracking-wide"`,children:["Добавить"," "]})})]})})})]})},ue=({image:s})=>e.jsx("img",{className:"h-auto max-w-full rounded-lg",src:s,alt:"fullsize attached image"}),pe=document.querySelector("#modal-root");function ge({isOpen:s,onCloseModal:m,children:o}){const n=x.useRef(null);return x.useEffect(()=>{const c=l=>{l.key==="Escape"&&m()},i=l=>{n.current&&!n.current.contains(l.target)&&m()};return s&&(document.body.style.overflow="hidden",document.addEventListener("keydown",c),document.addEventListener("mousedown",i)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",c),document.removeEventListener("mousedown",i)}},[s,m]),e.jsx(e.Fragment,{children:s&&H.createPortal(e.jsx("div",{className:"p-10 modal-overlay flex items-center justify-center fixed bg-black bg-opacity-50 top-0 left-0 w-full h-full z-50 ",children:e.jsx("div",{className:" modal shadow-lg rounded-xl ",ref:n,children:e.jsxs("div",{className:"relative modal-content justify-center w-full max-h-[90vh] overflow-y-auto",children:[e.jsx(L,{className:"w-8 h-8 rounded-full flex items-center justify-center bg-slate-400 hover:bg-slate-500   ml-auto mb-2  absolute smOnly:right-[6px] md:right-[10px] top-[10px] cursor-pointer",classNameSvg:"opacity-50   hover:opacity-100 hover:scale-105 transition-transform transform-all hover:rotate-90",id:"icon-cross",size:"24px",stroke:"white",onClick:m}),e.jsx("div",{className:"",children:o})]})})}),pe)})}const fe=({productId:s})=>{const m=y(),o=h(ce),n=h(S),[c,i]=x.useState(!1),[l,r]=x.useState(!1),[u,f]=x.useState(!1),[t,d]=x.useState(""),[p,v]=x.useState(null),j=()=>{i(!c)},w=g=>{v(g),f(!u)},a=g=>{d(g),r(!l)};x.useEffect(()=>{(!c||!l)&&m(J())},[m,c,l]);const M=(g=>g.filter(N=>N&&N.productId===s))(o);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"my-12 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl  font-bold tracking-tight text-gray-900 sm:text-3xl ",children:"Отзывы о товаре:"}),e.jsx("button",{onClick:j,className:"items-center shadow-sm max-w-[250px] rounded-md border border-transparent bg-lime-500 px-4 py-3 text-base font-medium text-white hover:bg-lime-600 focus:outline-none focus:ring-2 focus:ring-lime-600 focus:ring-offset-2",children:"Оставить отзыв"})]}),n?e.jsxs("div",{className:"flex flex-col gap-5 animate-pulse",children:[e.jsx("div",{className:"w-full h-[200px] bg-slate-100"}),e.jsx("div",{className:"w-full h-[200px] bg-slate-100"})]}):e.jsx("div",{children:o&&M.length>0?e.jsx("ul",{className:"flex flex-col gap-4",children:M.map((g,N)=>g&&e.jsx("li",{className:N!==M.length-1?"border-b border-gray-200 pb-8 pt-8":"pb-4 pt-8",children:e.jsx(ie,{review:g,openCommentModal:a,openImageModal:w})},g._id||N))}):e.jsx("div",{className:" text-center p-10 text-gray-500",children:"Пока нет отзывов к этом товару"})})]}),e.jsx(I,{isOpen:c,onCloseModal:j,children:e.jsx(de,{onCloseModal:j,productId:s})}),e.jsx(I,{isOpen:l,onCloseModal:a,children:e.jsx(he,{onCloseModal:a,reviewId:t})}),e.jsx(ge,{isOpen:u,onCloseModal:w,children:e.jsx(ue,{image:p})})]})},we=()=>{const{id:s}=B(),{category:m}=B(),o=y(),n=h(K),c=h(Q),i=h(X),[l,r]=x.useState("roll"),[u,f]=x.useState(null);x.useEffect(()=>{o(Y())},[o]);const t=n.find(a=>a._id===s),d=n.filter(a=>a._id!==t._id).filter(a=>a.name===t.name).filter(a=>a.category===t.category).filter(a=>a.color!==t.color),[p,v]=x.useState(1),j=a=>{a.preventDefault();const b={id:t._id,count:p,product:t,type:l};console.log(b),o(le(b))},w=a=>{a.preventDefault(o(ae(t._id)))};return e.jsxs("div",{className:"container",children:[!c&&t&&e.jsx(ee,{name:t.name}),!c&&t?e.jsxs("div",{className:"pt-6",children:[e.jsx("div",{className:"",children:e.jsx(re,{images:[t.mainPhoto,...t.extraPhotos],id:t._id,name:t.name})}),e.jsxs("div",{className:"mx-auto max-w-2xl px-4 pt-10 sm:px-6 lg:grid lg:max-w-7xl lg:grid-cols-3 lg:grid-rows-[auto,auto,1fr] lg:gap-x-8 lg:px-8 lg:pt-16",children:[e.jsx("div",{className:"lg:col-span-2 lg:border-r lg:border-gray-200 lg:pr-8",children:e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl",children:t.name})}),e.jsxs("div",{className:"mt-4 lg:row-span-3 lg:mt-0",children:[e.jsx("h2",{className:"sr-only",children:"Product information"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 xl:grid-cols-3 gap-2 mb-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"roll",className:"peer hidden",name:"framework",defaultChecked:!0,onChange:()=>{r("roll"),f(t.price)}}),e.jsxs("div",{className:"hover:bg-gray-50 flex items-center justify-between px-4 py-2 border-2 rounded-lg cursor-pointer text-sm border-gray-200 group peer-checked:border-blue-500",children:[e.jsx("h2",{className:"font-medium text-gray-700",children:"Рулон"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"green",className:"w-9 h-9 text-blue-600 invisible group-[.peer:checked+&]:visible",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"1",className:"peer hidden",name:"framework",disabled:t.pricePerMeter&&t.pricePerMeter<0||!t.pricePerMeter,onChange:()=>{r("meter"),f(t.pricePerMeter||0)}}),e.jsxs("div",{className:`hover:bg-gray-50 flex items-center justify-between px-4 py-2 border-2 rounded-lg cursor-pointer text-sm border-gray-200 group peer-checked:border-blue-500 ${t.pricePerMeter&&t.pricePerMeter>0||!t.pricePerMeter&&"opacity-50"}`,children:[e.jsx("h2",{className:"font-medium text-gray-700",children:"Метраж"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"green",className:"w-9 h-9 text-blue-600 invisible group-[.peer:checked+&]:visible",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-900  mb-4",children:"Стоимость:"}),e.jsx(se,{discount:t.discount||0,price:u||t.price}),e.jsxs("form",{className:"mt-10",children:[d&&d.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900  mb-4",children:"Расцветки и варианты:"}),e.jsx("div",{className:"flex flex-wrap gap-4 ",children:d?d.map(a=>e.jsx(te,{to:`/categories/${m}/${a._id}`,className:"w-14 h-14 flex justify-center items-center overflow-hidden",children:e.jsx("img",{className:"w-[50px] h-[50px]  rounded-[90px]  object-cover",src:a.mainPhoto,alt:a.name})},a._id)):e.jsx("div",{children:"Loading"})})]}),i&&i.some(a=>a.id===t._id)?e.jsxs("p",{className:"mt-10",children:[e.jsxs("span",{className:"font-bold ",children:[t.name," "]})," уже в Вашей корзине"]}):e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Количество"})}),e.jsxs("div",{className:"custom-number-input h-10 w-32 pt-2",children:[e.jsx("label",{htmlFor:"custom-input-number",className:"w-full text-gray-700 text-sm font-semibold"}),e.jsxs("div",{className:"shadow-sm flex flex-row h-10 w-full rounded-lg relative bg-transparent mt-1",children:[e.jsx("button",{onClick:a=>{a.preventDefault(),p!==1&&v(p-1)},"data-action":"decrement",className:" bg-gray-300 text-gray-600 hover:text-gray-700 hover:bg-gray-400 h-full w-20 rounded-l cursor-pointer outline-none",children:e.jsx("span",{className:"m-auto text-2xl font-thin",children:"−"})}),e.jsx("div",{type:"number",className:"flex justify-center items-center pointer-events-none focus:outline-none text-center w-full bg-gray-300 font-semibold text-md hover:text-black focus:text-black  md:text-basecursor-default flex items-center text-gray-700  outline-none",children:p}),e.jsx("button",{onClick:a=>{a.preventDefault(),v(p+1)},"data-action":"increment",className:"bg-gray-300 text-gray-600 hover:text-gray-700 hover:bg-gray-400 h-full w-20 rounded-r cursor-pointer",children:e.jsx("span",{className:"m-auto text-2xl font-thin",children:"+"})})]})]})]}),i&&i.some(a=>a.id===t._id)?e.jsx("div",{children:e.jsx("button",{onClick:w,className:"mt-2 flex w-full items-center justify-center rounded-md border border-transparent bg-red px-8 py-3 text-base font-medium text-white hover:bg-red focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Убрать из корзины"})}):e.jsx("button",{onClick:j,type:"submit",className:" shadow-sm mt-10 flex w-full items-center justify-center rounded-md border border-transparent bg-indigo-600 px-8 py-3 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Добавить в корзину"})]})]}),e.jsx("div",{className:"py-10 lg:col-span-2 lg:col-start-1 lg:border-r lg:border-gray-200 lg:pb-16 lg:pr-8 lg:pt-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900  mb-4",children:"Описание:"}),e.jsx("div",{className:"space-y-6",children:e.jsx("p",{className:"text-base text-gray-900 ",children:t.description.split(`\r
`).map((a,b)=>e.jsxs("div",{children:[a,e.jsx("br",{})]},b))})})]})})]}),e.jsx(fe,{productId:t._id})]}):e.jsx("div",{children:e.jsx(ne,{})})]})};export{we as default};
