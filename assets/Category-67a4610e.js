import{E as w,v as F,d as D,u as r,w as A,x as B,F as I,G as T,H as $,I as z,J as G,K as H,r as N,z as J,j as t,M as K,O,A as Q,Q as R}from"./index-3e1d8941.js";import{F as W}from"./Filter-ee158683.js";const q=o=>{const c=w.find(a=>a.category===o);if(c)return c.name;console.log(`Category name not found for ${o}`)},U=({title:o})=>{const{category:c}=F(),a=D(),g=r(A),L=r(B),f=r(I),h=r(T),m=r($),p=r(z),b=r(G),v=r(H),[j,M]=N.useState(1),l=12,S=e=>{M(e.selected+1)};N.useEffect(()=>{a(J())},[a]);const n=g.filter(e=>e.category===q(c)),P=e=>{if(!g)return e;const d=m.replace(/\D/g,"");return console.log("filterPrice",m),e.filter(i=>{const u=i.name.toLowerCase().includes(f.toLowerCase()),s=h==="Все категории"||i.category.toLowerCase().includes(h.toLowerCase()),x=p==="Все цвета"||i.color.toLowerCase().includes(p.toLowerCase()),k=!b||i.discount>0,E=m===""||+i.price<d;return u&&s&&x&&k&&E})},y=e=>{if(!v)return P(e);const d=g.map(s=>({timestamp:new Date(s.createdAt).getTime(),product:s}));console.log(d);const u=d.sort((s,x)=>x.timestamp-s.timestamp).map(s=>s.product);return P(u)},C=e=>y(e).slice((j-1)*l,j*l);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"",children:[t.jsxs("div",{className:"mx-auto",children:[t.jsx("h2",{className:"mb-6 text-xl font-bold tracking-tight text-gray-900 sm:text-2xl ",children:o}),C(n)&&!L?t.jsx("div",{className:" grid grid-cols-2 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8",children:C(n).map(e=>t.jsx(K,{product:e}))}):t.jsx("div",{children:t.jsx(O,{})})]}),Math.ceil(n.length/l)>1&&t.jsx(Pagination,{handleClickPage:S,totalPages:Math.ceil(n.length/l)})]}),y(n).length<=0&&t.jsx("div",{className:"w-full flex justify-center items-center py-28",children:t.jsxs("p",{children:["По запросу ",t.jsx("span",{className:" font-bold",children:f})," ничего не найдено."]})})]})},Y=()=>{const{category:o}=F(),c=w.some(a=>a.category===o);return t.jsx(t.Fragment,{children:c?t.jsxs("div",{className:"container",children:[t.jsx(Q,{}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl pb-4",children:"Весь католог:"}),t.jsx(W,{nameFilter:!0,filterColor:!0,filterPrice:!0,filterNew:!0,filterSale:!0})]}),t.jsx(U,{})]}):t.jsx(R,{text:`Категория "${o}" не найдена`,buttonName:"Все категории",link:"/categories"})})};export{Y as default};
