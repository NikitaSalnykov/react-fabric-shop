import{w as j,n as L,d as I,u as r,o as R,e as T,x as b,r as p,y as q,z as G,A as H,C as U,D as W,E as J,q as K,j as t,L as O,P as Q,S as V,F as X,G as Y,H as Z,s as ee,I as te}from"./index-cdb92293.js";import{F as se}from"./Filter-f21304c6.js";const re=c=>{const l=j.find(a=>a.category===c);if(l)return l.name;console.log(`Category name not found for ${c}`)},ae=({title:c})=>{const{category:l}=L(),a=I(),g=r(R),_=r(T),S=r(b),[d,y]=p.useState(r(b)||[]),w=r(q),N=r(G),x=r(H),v=r(U),k=r(W),$=r(J),[P,M]=p.useState(1),m=12,E=e=>{M(e.selected+1)},D=e=>{S.some(s=>s._id===e._id)?(a(Y(e._id)),y(d.filter(s=>s._id!==e._id))):(a(Z(e)),y([...d,e]))};p.useEffect(()=>{a(K())},[a]);const z=e=>{const s=j.find(o=>o.name===e);if(s)return s.category;console.log(`Category not found for ${e}`)},n=g.filter(e=>e.category===re(l)),C=e=>{if(!g)return e;const s=x.replace(/\D/g,"");return console.log("filterPrice",x),e.filter(o=>{const f=o.name.toLowerCase().includes(w.toLowerCase()),i=N==="Все категории"||o.category.toLowerCase().includes(N.toLowerCase()),u=v==="Все цвета"||o.color.toLowerCase().includes(v.toLowerCase()),A=!k||o.discount>0,B=x===""||+o.price<s;return f&&i&&u&&A&&B})},F=e=>{if(!$)return C(e);const s=g.map(i=>({timestamp:new Date(i.createdAt).getTime(),product:i}));console.log(s);const f=s.sort((i,u)=>u.timestamp-i.timestamp).map(i=>i.product);return C(f)},h=e=>F(e).slice((P-1)*m,P*m);return console.log("products",h(n)),t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"",children:[t.jsxs("div",{className:"mx-auto max-w-2xl lg:max-w-7xl",children:[t.jsx("h2",{className:"mb-6 text-xl font-bold tracking-tight text-gray-900 sm:text-2xl ",children:c}),h(n)&&!_?t.jsx("div",{className:" grid grid-cols-2 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8",children:h(n).map(e=>t.jsxs("div",{className:"relative",children:[t.jsxs(O,{to:`/categories/${l||z(e.category)}/${e._id}`,className:"group",children:[t.jsx("div",{className:"shadow-md h-[200px] md:h-[250px] md:h-300px aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-lg bg-gray-200 xl:aspect-h-8 xl:aspect-w-7",children:t.jsx("img",{src:e.mainPhoto,alt:e.name,className:"h-full w-full object-cover object-center group-hover:opacity-75 sm:h-[280px]"})}),t.jsx("h3",{className:"mt-4 text-sm text-gray-700",children:e.name}),t.jsx(Q,{price:e.price,discount:e.discount,orientation:"row",size:"small"})]},e._id),e.discount>0&&t.jsx("div",{className:"absolute top-4 left-4 w-12 h-12 rounded-full bg-red flex justify-center items-center cursor-pointer ",children:t.jsxs("p",{className:"flex justify-center items-center gap-[1px] text-white font-semibold",children:[t.jsx("span",{className:" text-[10px]",children:"-"}),e.discount,t.jsx("span",{className:" text-[10px]",children:"%"})]})}),t.jsx("div",{onClick:()=>D(e),className:`absolute top-4 right-4 w-10 h-10 rounded-full bg-white flex justify-center items-center  ${d.some(s=>s._id===e._id)?" opacity-80":"opacity-40"} hover:opacity-80 cursor-pointer `,children:t.jsx(V,{id:"icon-favorite-product",size:22,fill:`${d.some(s=>s._id===e._id)?"red":"gray"}`,stroke:`${d.some(s=>s._id===e._id)?"red":"gray"}`})})]}))}):t.jsx("div",{children:t.jsx(X,{})})]}),Math.ceil(n.length/m)>1&&t.jsx(Pagination,{handleClickPage:E,totalPages:Math.ceil(n.length/m)})]}),F(n).length<=0&&t.jsx("div",{className:"w-full flex justify-center items-center py-28",children:t.jsxs("p",{children:["По запросу ",t.jsx("span",{className:" font-bold",children:w})," ничего не найдено."]})})]})},ce=()=>{const{category:c}=L(),l=j.some(a=>a.category===c);return t.jsx(t.Fragment,{children:l?t.jsxs("div",{className:"container",children:[t.jsx(ee,{}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl pb-4",children:"Весь католог:"}),t.jsx(se,{nameFilter:!0,filterColor:!0,filterPrice:!0,filterNew:!0,filterSale:!0})]}),t.jsx(ae,{})]}):t.jsx(te,{text:`Категория "${c}" не найдена`,buttonName:"Все категории",link:"/categories"})})};export{ce as default};
