import{d as R,u as a,w as z,x as D,G as E,r as u,F as P,H as W,I,J as U,K as B,M as G,z as H,j as e,L as J,_ as K,T as O,c as Q,$ as q,O as V,Q as X,R as Y,W as Z,A as ee}from"./index-61b8991e.js";import{F as te}from"./Filter-3646f8b7.js";const se=({title:g})=>{const c=R(),o=a(z),b=a(D),p=a(E),[n,j]=u.useState(a(P)||[]),L=a(P),d=a(W),w=a(I),y=a(U),F=a(B),_=a(G),[v,S]=u.useState(1),m=12,M=t=>{S(t.selected+1)},k=t=>{L.some(s=>s._id===t._id)?(c(X(t._id)),j(n.filter(s=>s._id!==t._id))):(c(Y(t)),j([...n,t]))},N=t=>x(t).slice((v-1)*m,v*m),C=t=>{if(!o)return t;const s=w.replace(/\D/g,"");return t.filter(r=>{let l;const i=r.name.toLowerCase().includes(p.toLowerCase());d==="Основные ткани"?l=["Фатин","Атлас","Подкладочная ткань","Органза","Сетка","Глиттер","Гипюры и кружева"].some(f=>r.category.toLowerCase().includes(f.toLowerCase())):d==="Аксессуары"?l=["Фурнитура"].some(f=>r.category.toLowerCase().includes(f.toLowerCase())):l=d==="Все категории"||r.category.toLowerCase().includes(d.toLowerCase());const h=y==="Все цвета"||r.color.toLowerCase().includes(y.toLowerCase()),$=!F||r.discount>0,T=w===""||+r.price<s;return i&&l&&h&&$&&T})};u.useEffect(()=>{c(H())},[c]);const x=t=>{if(!_)return C(t);const l=t.map(i=>({timestamp:new Date(i.createdAt).getTime(),product:i})).sort((i,h)=>h.timestamp-i.timestamp).map(i=>i.product);return C(l)};return e.jsx("div",{className:"md:min-h-[400px]",children:e.jsxs("div",{className:"mx-auto",children:[e.jsx("h2",{className:"mb-6 text-xl font-bold tracking-tight text-red-900 sm:text-2xl ",children:g}),N(o)&&!b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" grid grid-cols-2 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8 ",children:N(o).map(t=>e.jsxs("div",{className:"relative flex flex-col justify-between",children:[e.jsxs(J,{to:`/categories/${K(t.category)}/${t._id}`,className:"group",children:[e.jsx("div",{className:"shadow-md h-[200px] md:h-[250px] md:h-300px aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-lg bg-gray-200 xl:aspect-h-8 xl:aspect-w-7",children:e.jsx("img",{src:t.mainPhoto,alt:t.name,className:"h-full w-full object-cover object-center group-hover:opacity-75 sm:h-[280px]"})}),e.jsx("h3",{className:"mt-4 text-lg text-gray-700",children:t.name}),e.jsxs("p",{className:" capitalize text-sm text-gray-700",children:["Цвет: ",t.color]}),e.jsx("p",{className:"mt-1 text-sm font-medium text-gray-900",children:t.category})]},t._id),e.jsx("div",{className:"mt-2",children:e.jsx(O,{product:t})}),t.discount>0&&e.jsx("div",{className:"absolute top-4 w-12 h-12 rounded-full bg-red flex justify-center items-center cursor-pointer  left-4 ",children:e.jsxs("p",{className:"flex justify-center items-center gap-[1px] text-white font-semibold",children:[e.jsx("span",{className:" text-[10px]",children:"-"}),t.discount,e.jsx("span",{className:" text-[10px]",children:"%"})]})}),e.jsx("div",{onClick:()=>k(t),className:`absolute top-4 right-4 w-10 h-10 rounded-full bg-white flex justify-center items-center  ${n.some(s=>s._id===t._id)?" opacity-80":"opacity-40"} hover:opacity-80 cursor-pointer `,children:e.jsx(Q,{id:"icon-favorite-product",size:22,fill:`${n.some(s=>s._id===t._id)?"red":"gray"}`,stroke:`${n.some(s=>s._id===t._id)?"red":"gray"}`})})]}))}),Math.ceil(x(o).length/m)>1&&e.jsx(q,{handleClickPage:M,totalPages:Math.ceil(x(o).length/m)})]}):e.jsx("div",{children:e.jsx(V,{})}),x(o).length<=0&&e.jsx("div",{className:"w-full flex justify-center items-center mt-4",children:e.jsxs("p",{children:["По запросу ",e.jsx("span",{className:" font-bold",children:p})," ничего не найдено."]})})]})})},ie=()=>{const g=Z(),c=new URLSearchParams(g.search).get("value");return e.jsxs("div",{className:"container",children:[e.jsx(ee,{}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl pb-4",children:"Весь ассортимент:"}),e.jsx(te,{nameFilter:!0,filterColor:!0,filterCategory:!0,filterPrice:!0,filterNew:!0,filterSale:!0,value:c})]}),e.jsx(se,{})]})]})};export{ie as default};
