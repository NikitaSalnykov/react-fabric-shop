import{a as D,u as a,s as E,t as A,D as z,r as f,C as N,E as I,F as R,G as T,H as W,I as B,w as G,j as e,L as H,W as J,P as K,S as U,X,J as q,K as O,M as Q,x as V}from"./index-aaa938db.js";import{F as Y}from"./Filter-0c955b63.js";const Z=({title:P})=>{const o=D(),r=a(E),C=a(A),u=a(z),[c,p]=f.useState(a(N)||[]),F=a(N),j=a(I),m=a(R),w=a(T),b=a(W),L=a(B),[v,_]=f.useState(1),n=12,S=t=>{_(t.selected+1)},M=t=>{F.some(s=>s._id===t._id)?(o(O(t._id)),p(c.filter(s=>s._id!==t._id))):(o(Q(t)),p([...c,t]))},y=t=>d(t).slice((v-1)*n,v*n),x=t=>{if(!r)return t;const s=m.replace(/\D/g,"");return console.log("filterPrice",m),t.filter(l=>{const g=l.name.toLowerCase().includes(u.toLowerCase()),i=j==="Все категории"||l.category.toLowerCase().includes(j.toLowerCase()),h=w==="Все цвета"||l.color.toLowerCase().includes(w.toLowerCase()),k=!b||l.discount>0,$=m===""||+l.price<s;return g&&i&&h&&k&&$})};f.useEffect(()=>{o(G())},[o]);const d=t=>{if(!L)return x(t);const s=t.map(i=>({timestamp:new Date(i.createdAt).getTime(),product:i}));console.log(s);const g=s.sort((i,h)=>h.timestamp-i.timestamp).map(i=>i.product);return x(g)};return console.log(x(r)),e.jsx("div",{className:"md:min-h-[400px]",children:e.jsxs("div",{className:"mx-auto max-w-2xl lg:max-w-7xl",children:[e.jsx("h2",{className:"mb-6 text-xl font-bold tracking-tight text-red-900 sm:text-2xl ",children:P}),y(r)&&!C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" grid grid-cols-2 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8 ",children:y(r).map(t=>e.jsxs("div",{className:"relative",children:[e.jsxs(H,{to:`/categories/${J(t.category)}/${t._id}`,className:"group",children:[e.jsx("div",{className:"shadow-md h-[200px] md:h-[250px] md:h-300px aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-lg bg-gray-200 xl:aspect-h-8 xl:aspect-w-7",children:e.jsx("img",{src:t.mainPhoto,alt:t.name,className:"h-full w-full object-cover object-center group-hover:opacity-75 sm:h-[280px]"})}),e.jsx("h3",{className:"mt-4 text-sm text-gray-700",children:t.name}),e.jsx("p",{className:"mt-1 text-sm font-medium text-gray-900",children:t.category}),e.jsx(K,{price:t.price,discount:t.discount,orientation:"row",size:"small"})]},t._id),t.discount>0&&e.jsx("div",{className:"absolute top-4 w-12 h-12 rounded-full bg-red flex justify-center items-center cursor-pointer  left-4 ",children:e.jsxs("p",{className:"flex justify-center items-center gap-[1px] text-white font-semibold",children:[e.jsx("span",{className:" text-[10px]",children:"-"}),t.discount,e.jsx("span",{className:" text-[10px]",children:"%"})]})}),e.jsx("div",{onClick:()=>M(t),className:`absolute top-4 right-4 w-10 h-10 rounded-full bg-white flex justify-center items-center  ${c.some(s=>s._id===t._id)?" opacity-80":"opacity-40"} hover:opacity-80 cursor-pointer `,children:e.jsx(U,{id:"icon-favorite-product",size:22,fill:`${c.some(s=>s._id===t._id)?"red":"gray"}`,stroke:`${c.some(s=>s._id===t._id)?"red":"gray"}`})})]}))}),Math.ceil(d(r).length/n)>1&&e.jsx(X,{handleClickPage:S,totalPages:Math.ceil(d(r).length/n)})]}):e.jsx("div",{children:e.jsx(q,{})}),d(r).length<=0&&e.jsx("div",{className:"w-full flex justify-center items-center mt-4",children:e.jsxs("p",{children:["По запросу ",e.jsx("span",{className:" font-bold",children:u})," ничего не найдено."]})})]})})},se=()=>e.jsxs("div",{className:"container",children:[e.jsx(V,{}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl pb-4",children:"Весь ассортимент:"}),e.jsx(Y,{nameFilter:!0,filterColor:!0,filterCategory:!0,filterPrice:!0,filterNew:!0,filterSale:!0})]}),e.jsx(Z,{})]})]});export{se as default};
