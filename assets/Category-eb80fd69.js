import{I as w,y as F,d as D,u as r,z as T,A,J as B,K as I,M as R,O as $,Q as z,R as J,r as N,D as K,j as t,T as O,U as Q,E as U,V}from"./index-f0986de2.js";import{F as W}from"./Filter-45e48951.js";const q=o=>{const c=w.find(a=>a.category===o);if(c)return c.name;console.log(`Category name not found for ${o}`)},G=({title:o})=>{const{category:c}=F(),a=D(),g=r(T),L=r(A),f=r(B),h=r(I),m=r(R),p=r($),b=r(z),M=r(J),[j,v]=N.useState(1),l=12,S=e=>{v(e.selected+1)};N.useEffect(()=>{a(K())},[a]);const n=g.filter(e=>e.category===q(c)),y=e=>{if(!g)return e;const d=m.replace(/\D/g,"");return console.log("filterPrice",m),e.filter(i=>{const u=i.name.toLowerCase().includes(f.toLowerCase()),s=h==="Все категории"||i.category.toLowerCase().includes(h.toLowerCase()),x=p==="Все цвета"||i.color.toLowerCase().includes(p.toLowerCase()),k=!b||i.discount>0,E=m===""||+i.price<d;return u&&s&&x&&k&&E})},P=e=>{if(!M)return y(e);const d=g.map(s=>({timestamp:new Date(s.createdAt).getTime(),product:s}));console.log(d);const u=d.sort((s,x)=>x.timestamp-s.timestamp).map(s=>s.product);return y(u)},C=e=>P(e).slice((j-1)*l,j*l);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"",children:[t.jsxs("div",{className:"mx-auto",children:[t.jsx("h2",{className:"mb-6 text-xl font-bold tracking-tight text-gray-900 sm:text-2xl ",children:o}),C(n)&&!L?t.jsx("div",{className:" grid grid-cols-2 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8",children:C(n).map(e=>t.jsx(O,{product:e}))}):t.jsx("div",{children:t.jsx(Q,{})})]}),Math.ceil(n.length/l)>1&&t.jsx(Pagination,{handleClickPage:S,totalPages:Math.ceil(n.length/l)})]}),P(n).length<=0&&t.jsx("div",{className:"w-full flex justify-center items-center py-28",children:t.jsxs("p",{children:["По запросу ",t.jsx("span",{className:" font-bold",children:f})," ничего не найдено."]})})]})},Y=()=>{const{category:o}=F(),c=w.some(a=>a.category===o);return t.jsx(t.Fragment,{children:c?t.jsxs("div",{className:"container",children:[t.jsx(U,{}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl pb-4",children:"Весь католог:"}),t.jsx(W,{nameFilter:!0,filterColor:!0,filterPrice:!0,filterNew:!0,filterSale:!0})]}),t.jsx(G,{})]}):t.jsx(V,{text:`Категория "${o}" не найдена`,buttonName:"Все категории",link:"/categories"})})};export{Y as default};
