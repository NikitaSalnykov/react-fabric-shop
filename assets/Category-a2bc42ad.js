import{I as w,y as F,d as D,u as r,z as T,A,J as B,K as I,M as R,O as W,Q as $,R as z,r as N,D as J,j as t,T as K,U as O,E as Q,V as U}from"./index-8f9977c4.js";import{F as V}from"./Filter-0e8bc799.js";const q=o=>{const a=w.find(c=>c.category===o);if(a)return a.name;console.log(`Category name not found for ${o}`)},G=({title:o})=>{const{category:a}=F(),c=D(),d=r(T),L=r(A),u=r(B),x=r(I),f=r(R),h=r(W),b=r($),M=r(z),[p,v]=N.useState(1),l=12,S=e=>{v(e.selected+1)};N.useEffect(()=>{c(J())},[c]);const n=d.filter(e=>e.category===q(a)),j=e=>{if(!d)return e;const C=f.replace(/\D/g,"");return e.filter(i=>{const g=i.name.toLowerCase().includes(u.toLowerCase()),s=x==="Все категории"||i.category.toLowerCase().includes(x.toLowerCase()),m=h==="Все цвета"||i.color.toLowerCase().includes(h.toLowerCase()),k=!b||i.discount>0,E=f===""||+i.price<C;return g&&s&&m&&k&&E})},y=e=>{if(!M)return j(e);const g=d.map(s=>({timestamp:new Date(s.createdAt).getTime(),product:s})).sort((s,m)=>m.timestamp-s.timestamp).map(s=>s.product);return j(g)},P=e=>y(e).slice((p-1)*l,p*l);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"",children:[t.jsxs("div",{className:"mx-auto",children:[t.jsx("h2",{className:"mb-6 text-xl font-bold tracking-tight text-gray-900 sm:text-2xl ",children:o}),P(n)&&!L?t.jsx("div",{className:" grid grid-cols-2 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8",children:P(n).map(e=>t.jsx(K,{product:e}))}):t.jsx("div",{children:t.jsx(O,{})})]}),Math.ceil(n.length/l)>1&&t.jsx(Pagination,{handleClickPage:S,totalPages:Math.ceil(n.length/l)})]}),y(n).length<=0&&t.jsx("div",{className:"w-full flex justify-center items-center py-28",children:t.jsxs("p",{children:["По запросу ",t.jsx("span",{className:" font-bold",children:u})," ничего не найдено."]})})]})},Y=()=>{const{category:o}=F(),a=w.some(c=>c.category===o);return t.jsx(t.Fragment,{children:a?t.jsxs("div",{className:"container",children:[t.jsx(Q,{}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[t.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl pb-4",children:"Весь католог:"}),t.jsx(V,{nameFilter:!0,filterColor:!0,filterPrice:!0,filterNew:!0,filterSale:!0})]}),t.jsx(G,{})]}):t.jsx(U,{text:`Категория "${o}" не найдена`,buttonName:"Все категории",link:"/categories"})})};export{Y as default};
