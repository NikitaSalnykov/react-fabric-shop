import{a as L,b as l,g as _,r as p,f as S,j as e,S as M,h as z,v as A,w as E,x as q,y as D,z as T,A as B,c as I,D as G,i as P,F as H,G as J,H as K,I as O,J as U,L as W,K as Q,P as V,M as X,k as Y,l as Z,m as ee,B as se}from"./index-91c23468.js";const te=()=>{const a=L(),o=l(_);p.useEffect(()=>{a(S())},[]);const i=({currentTarget:t})=>{a(A(t.value))},b=({currentTarget:t})=>{a(E(t.value))},m=({currentTarget:t})=>{a(q(t.value))},n=({currentTarget:t})=>{console.log(t.value),a(D(t.value))},g=t=>{const d=t.currentTarget.checked;a(T(d))},y=t=>{const d=t.currentTarget.checked;a(B(d))},h=()=>{const t=[];return o.map(x=>t.push(x.color)),t.filter((x,u,v)=>v.indexOf(x)===u)};return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("label",{className:"flex justify-center items-center",style:{marginRight:"14px"},htmlFor:"filter",children:e.jsx(M,{id:"icon-search",size:22})}),e.jsx("input",{id:"filter",type:"text",name:"input",required:!0,onChange:i,variant:"standard",className:"bg-transparent border-b-2 px-2 text-gray-800 border-gray-600 hover:outline-none focus:outline-none w-full"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("label",{className:"sr-only",style:{marginRight:"14px"},htmlFor:"filterColor",children:"Цвет"}),e.jsxs("select",{id:"filterColor",onChange:b,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{selected:!0,children:"Все цвета"}),o&&h().map(t=>e.jsx("option",{children:t}))]})]}),e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("label",{className:"sr-only",style:{marginRight:"14px"},htmlFor:"filterCategory",children:"Категория"}),e.jsxs("select",{id:"filterCategory",onChange:m,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{selected:!0,children:"Все категории"}),z.map(t=>e.jsx("option",{children:t.name}))]})]}),e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("label",{className:"sr-only",style:{marginRight:"14px"},htmlFor:"filterPrice",children:"Цена"}),e.jsxs("select",{id:"filterPrice",onChange:n,class:`bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 
       dark:focus:border-blue-500`,children:[e.jsx("option",{value:"1000000",selected:!0,children:"Все цены"}),e.jsx("option",{value:"100",children:"До 100"}),e.jsx("option",{value:"200",children:"До 200"}),e.jsx("option",{value:"300",children:"До 300"}),e.jsx("option",{value:"1000",children:"До 1000"}),e.jsx("option",{value:"2500",children:"До 2500"}),e.jsx("option",{value:"100000",children:"более 2500"})]})]})]})]}),e.jsxs("div",{className:"flex items-start ml-auto gap-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"salesProducts",type:"checkbox",className:"bg-gray-50 border border-gray-300 focus:ring-3 focus:ring-blue-300 h-4 w-4 rounded ",onChange:y})}),e.jsx("div",{className:"text-sm ml-1",children:e.jsx("label",{htmlFor:"salesProducts",className:"font-medium text-gray-900 ",children:"Со скидкой"})})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"newProducts",type:"checkbox",className:"bg-gray-50 border border-gray-300 focus:ring-3 focus:ring-blue-300 h-4 w-4 rounded ",onChange:g})}),e.jsx("div",{className:"text-sm ml-1",children:e.jsx("label",{htmlFor:"newProducts",className:"font-medium text-gray-900 ",children:"Новые поступления"})})]})]})]})},re=({title:a})=>{const o=L(),i=l(_),b=l(I),m=l(G),[n,g]=p.useState(l(P)||[]),y=l(P),h=l(H);l(J);const t=l(K),d=l(O),x=l(U),[u,v]=p.useState(1),f=12,R=s=>{v(s.selected+1)},$=s=>{y.some(r=>r._id===s._id)?(o(Z(s._id)),g(n.filter(r=>r._id!==s._id))):(o(ee(s)),g([...n,s]))},C=s=>j(s).slice((u-1)*f,u*f),N=s=>i?s.filter(r=>{const F=r.name.toLowerCase().includes(m.toLowerCase()),w=h==="Все категории"||r.category.toLowerCase().includes(h.toLowerCase()),c=t==="Все цвета"||r.color.toLowerCase().includes(t.toLowerCase()),k=!d||r.discount>0;return F&&w&&c&&k}):s;p.useEffect(()=>{o(S())},[o]);const j=s=>{if(!x)return N(s);const r=s.map(c=>({timestamp:new Date(c.createdAt).getTime(),product:c}));console.log(r);const w=r.sort((c,k)=>k.timestamp-c.timestamp).map(c=>c.product);return N(w)};return console.log(N(i)),e.jsx("div",{className:"md:min-h-[400px]",children:e.jsxs("div",{className:"mx-auto max-w-2xl lg:max-w-7xl",children:[e.jsx("h2",{className:"mb-6 text-xl font-bold tracking-tight text-red-900 sm:text-2xl ",children:a}),C(i)&&!b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" grid grid-cols-2 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8 ",children:C(i).map(s=>e.jsxs("div",{className:"relative",children:[e.jsxs(W,{to:`/categories/${Q(s.category)}/${s._id}`,className:"group",children:[e.jsx("div",{className:"shadow-md h-[200px] md:h-[250px] md:h-300px aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-lg bg-gray-200 xl:aspect-h-8 xl:aspect-w-7",children:e.jsx("img",{src:s.mainPhoto,alt:s.name,className:"h-full w-full object-cover object-center group-hover:opacity-75 sm:h-[280px]"})}),e.jsx("h3",{className:"mt-4 text-sm text-gray-700",children:s.name}),e.jsx("p",{className:"mt-1 text-sm font-medium text-gray-900",children:s.category}),e.jsx(V,{price:s.price,discount:s.discount,orientation:"row",size:"small"})]},s._id),s.discount>0&&e.jsx("div",{className:"absolute top-4 w-12 h-12 rounded-full bg-red flex justify-center items-center cursor-pointer  left-4 ",children:e.jsxs("p",{className:"flex justify-center items-center gap-[1px] text-white font-semibold",children:[e.jsx("span",{className:" text-[10px]",children:"-"}),s.discount,e.jsx("span",{className:" text-[10px]",children:"%"})]})}),e.jsx("div",{onClick:()=>$(s),className:`absolute top-4 right-4 w-10 h-10 rounded-full bg-white flex justify-center items-center  ${n.some(r=>r._id===s._id)?" opacity-80":"opacity-40"} hover:opacity-80 cursor-pointer `,children:e.jsx(M,{id:"icon-favorite-product",size:22,fill:`${n.some(r=>r._id===s._id)?"red":"gray"}`,stroke:`${n.some(r=>r._id===s._id)?"red":"gray"}`})})]}))}),Math.ceil(j(i).length/f)>1&&e.jsx(X,{handleClickPage:R,totalPages:Math.ceil(j(i).length/f)})]}):e.jsx("div",{children:e.jsx(Y,{})}),j(i).length<=0&&e.jsx("div",{className:"w-full flex justify-center items-center mt-4",children:e.jsxs("p",{children:["По запросу ",e.jsx("span",{className:" font-bold",children:m})," ничего не найдено."]})})]})})},ae=()=>e.jsxs("div",{className:"container",children:[e.jsx(se,{}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl pb-4",children:"Весь ассортимент:"}),e.jsx(te,{})]}),e.jsx(re,{})]})]});export{ae as default};
