import{r as x,j as e,S as A,N as S,a as V,b as D,c as M,u as m,g as P,d as N,f as O,e as E,h as Z,i as T,k as F,l as q,m as U,n as R,o as _,p as $,q as z,s as W,t as G,v as H,w as J,B as I,x as K,F as Q,y as B,z as X,A as Y,C as ee,D as se,E as te,P as le,L as ae,G as re,H as ne}from"./index-8f9977c4.js";/* empty css                         */const ie=({images:t,id:h,name:o})=>{const n=x.useRef(null),c=x.useRef(null);return e.jsx(e.Fragment,{children:t&&e.jsxs(A,{className:"flex justify-center items-center lg:w-[800px]",modules:[S,V,S],navigation:{prevEl:n.current,nextEl:c.current},loop:!0,spaceBetween:50,slidesPerView:1,children:[t.map((i,l)=>e.jsx(D,{className:"mb-5 w-full",style:{display:"flex"},children:e.jsx("div",{className:"flex w-full justify-center items-center",children:e.jsx("div",{className:"h-[450px] w-[450px] md:h-[550px]  md:w-[650px] flex items-center justify-center",children:e.jsx("img",{className:"shadow-md w-full h-full overflow-hidden object-cover",src:i,alt:o})})})},l)),e.jsx("button",{className:"flex justify-center items-center absolute z-10 top-[50%] w-[25px] h-[25px] bg-black rounded-[50%]  left-[10px] opacity-70",ref:n,children:e.jsx("div",{className:" rotate-180",children:e.jsx(M,{id:"icon-arrow",size:24,stroke:"white",fill:"white"})})}),e.jsx("button",{className:"flex justify-center items-center absolute z-10 top-[50%] w-[25px] h-[25px] bg-black  opacity-70 rounded-[50%] right-[10px] ",ref:c,children:e.jsx(M,{id:"icon-arrow",size:24,stroke:"white",fill:"white"})})]})})},oe=()=>e.jsxs("div",{className:"container pt-6 animate-pulse",children:[e.jsx("div",{className:"w-full lg:w-1/3 h-12 lg:h-6 bg-slate-200 mb-8"}),e.jsx("div",{className:"mx-auto bg-slate-200 h-[450px] w-full md:h-[550px]  md:w-[650px] flex items-center justify-center"}),e.jsxs("div",{className:"mx-auto max-w-2xl pt-10 lg:grid lg:max-w-7xl lg:grid-cols-3 lg:grid-rows-[auto,auto,1fr] lg:gap-x-8 lg:pt-16",children:[e.jsxs("div",{className:"lg:col-span-2 lg:border-r lg:border-gray-200 lg:pr-8",children:[e.jsx("div",{className:"h-6 w-1/2 bg-slate-200"}),e.jsx("div",{className:"mt-8 h-20 w-1/2 bg-slate-200"})]}),e.jsxs("div",{className:"mt-4 lg:row-span-3 lg:mt-0",children:[e.jsx("div",{className:"h-6 w-1/3 bg-slate-200"}),e.jsx("div",{className:"mt-4 h-6 w-1/2 bg-slate-200"}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-5 w-[60%] bg-slate-200"}),e.jsx("div",{className:"flex flex-wrap gap-4 ",children:e.jsxs("div",{className:"mt-8 w-full h-14 flex overflow-hidden gap-4",children:[e.jsx("div",{className:"w-[50px] h-[50px]  rounded-[90px] bg-slate-200 object-cover"}),e.jsx("div",{className:"w-[50px] h-[50px]  rounded-[90px] bg-slate-200 object-cover"}),e.jsx("div",{className:"w-[50px] h-[50px]  rounded-[90px] bg-slate-200 object-cover"})]})})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"h-4 w-1/3 bg-slate-200"})}),e.jsx("div",{className:" mt-4 custom-number-input h-10 w-32 pt-2 bg-slate-200"})]}),e.jsx("div",{className:"bg-slate-200 mt-10 w-[70%] h-12 mx-auto"})]})]})]})]}),ce=({review:t,openCommentModal:h,openImageModal:o})=>{const[n,c]=x.useState(!1),i=m(P),l=N();return e.jsxs("article",{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-bold text-xl",children:t.author}),e.jsxs("div",{className:"flex items-center mb-1 space-x-1 rtl:space-x-reverse",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:t.rating>=1?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})}),e.jsx("svg",{className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:t.rating>=2?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})}),e.jsx("svg",{className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:t.rating>=3?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})}),e.jsx("svg",{className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:t.rating>=4?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})}),e.jsx("svg",{className:"w-4 h-4 text-gray-300 ","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:t.rating>=5?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})]})]}),e.jsx("div",{className:"mb-5 text-sm ",children:e.jsxs("p",{className:"text-gray-500",children:["Отзыв оставлен: ",e.jsx("span",{children:O(t.createdAt)})]})}),e.jsx("div",{className:"flex items-center mb-2",children:e.jsxs("p",{children:[t.text.split("").length>=250&&!n?t.text.split("").slice(0,250):t.text,t.text.split("").length>=250&&!n&&e.jsx("span",{onClick:()=>c(!n),className:" cursor-pointer text-sm font-medium text-blue-600 hover:underline ",children:"...Ещё"})]})}),t.text.split("").length>=250&&n&&e.jsx("button",{onClick:()=>c(!n),className:"block text-sm font-medium text-blue-600 hover:underline ",children:"Свернуть"}),t.extraPhotos&&t.extraPhotos.length>0&&e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 opacity-70",children:[e.jsx(M,{id:"icon-clip",size:16}),e.jsx("p",{className:" font-semibold text-sm",children:"Прикрепленные фотографии:"})]}),e.jsx("ul",{className:"flex flex-wrap gap-4",children:t.extraPhotos&&t.extraPhotos.map((r,p)=>e.jsx("li",{onClick:()=>o(r),className:"w-[100px] h-[100px] overflow-hidden cursor-pointer hover:translate-y-[1px] hover:opacity-70",children:e.jsx("img",{className:"h-full max-w-full rounded-lg object-cover",src:r,alt:"attached photo"})},p))})]}),e.jsxs("div",{className:"flex flex-row-reverse gap-4",children:[i&&(i._id===t.authorId||i.role==="admin")&&e.jsx("button",{onClick:()=>l(E(t._id)),className:" cursor-pointer text-sm font-medium text-rose-700 hover:underline ",children:"Удалить"}),i&&i.role==="admin"&&e.jsx("button",{onClick:()=>h(t._id),className:" cursor-pointer text-sm font-medium hover:underline ",children:"Ответить"})]})]}),t.comments&&t.comments.length>0&&t.comments.map(r=>r&&e.jsxs("div",{className:"ml-8 pl-4 border-l-[3px] mt-4",children:[e.jsx("p",{className:"font-bold text-xl ",children:"Ответ Администратора"}),e.jsx("div",{className:"mb-5 text-sm ",children:e.jsxs("p",{className:"text-gray-500",children:["Ответ оставлен:"," ",e.jsx("span",{children:O(t.createdAt)})]})}),e.jsx("div",{className:"flex items-center mb-2",children:e.jsxs("p",{children:[r.comment.split("").length>=250&&!n?r.comment.split("").slice(0,250):r.comment,r.comment.split("").length>=250&&!n&&e.jsx("span",{onClick:()=>c(!n),className:" cursor-pointer text-sm font-medium text-blue-600 hover:underline ",children:"...Ещё"})]})}),r.comment.split("").length>=250&&n&&e.jsx("button",{onClick:()=>c(!n),className:"block text-sm font-medium text-blue-600 hover:underline ",children:"Свернуть"}),i&&i.role==="admin"&&e.jsx("div",{className:"mt-1 text-right",children:e.jsx("button",{onClick:()=>l(Z({reviewId:t._id,commentId:r._id})),className:" cursor-pointer text-sm font-medium text-rose-700 hover:underline ",children:"Удалить"})})]},r._id))]})},de=T({author:F().min(2,"Имя должно содержать минимум 2 символа").max(16,"Имя должно содержать максимум 16 символов").required("Укажите имя"),text:F().min(40,"Отзыв должен содержать минимум 40 символов").max(450,"Отзыв должен содержать максимум 16 символов").required("Оставьте отзыв"),extraPhotos:q().test("maxFiles","Максимальное количество файлов - 3",t=>t?t.length<=3:!0).nullable(),rating:U().min(1,"Поставьте оценку").max(5,"Оценка должна быть не более 5")}),C="pl-4 absolute  text-rose-500 text-xs font-normal left-[-20px] bottom-[-15px] xl:left-[85px]",k="text-neutral-900 text-sm font-semibold font-['Manrope'] tracking-wide mdOnly:text-[16px] ",xe=({onCloseModal:t,productId:h})=>{const o=m(P),n=N(),c=m(R),i=m(_);x.useEffect(()=>{i&&(t(),n($()))},[i,t,n]);const l=z({initialValues:{author:o&&`${o.name} ${o.surname}`||"",text:"",extraPhotos:null,rating:0},validateOnChange:!1,validateOnBlur:!0,validationSchema:de,onSubmit:({rating:s,text:d,author:u,extraPhotos:v})=>{const j={text:d,author:u,extraPhotos:v,rating:s,productId:h,authorId:""};o&&(j.authorId=o._id);const w=f(j);n(W(w))}}),r=l.errors,p=l.values,f=s=>{const d=new FormData;return d.append("text",s.text),d.append("rating",s.rating),d.append("author",s.author),d.append("productId",s.productId),s.authorId&&d.append("authorId",s.authorId),s.extraPhotos&&[...s.extraPhotos].forEach(u=>{d.append("extraPhotos",u)}),d};return e.jsxs("div",{className:" text-center smOnly:px-3 md:px-5 rounded-3xl",children:[e.jsx("h3",{className:"text-neutral-900 text-2xl mb-11 font-medium font-['Manrope'] tracking-wide ",children:"Оставить отзыв"}),e.jsx("div",{className:"",children:e.jsx("form",{noValidate:!0,autoComplete:"off",className:"flex flex-col flex-wrap-reverse",onSubmit:l.handleSubmit,children:e.jsxs("div",{className:"flex-row-reverse w-[275px] md:w-[500px]",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"relative flex flex-col gap-2 justify-between",children:[e.jsx("label",{className:k,htmlFor:"color",children:"Ваше имя:"}),e.jsx("input",{className:`flex w-[100%] h-[100%] px-[16px] py-[8px] border border-blue rounded-[10px] ${r.author&&"border-rose-400"}`,type:"text",id:"author",name:"author",placeholder:"Введите имя",value:p.author,onChange:l.handleChange}),r.author&&e.jsx("p",{className:C,children:r.author})]}),e.jsx("div",{className:"flex-col",children:e.jsxs("div",{className:"flex flex-col gap-2 justify-start w-full relative",children:[e.jsx("label",{className:k,htmlFor:"text",children:"Отзыв:"}),e.jsx("textarea",{className:`flex w-[100%] h-[200px] px-[16px] py-[8px] border border-blue rounded-[10px] resize-none ${r.text&&"border-rose-400"}`,type:"text",id:"text",name:"text",placeholder:"Введите отзыв",value:p.text,onChange:l.handleChange}),r.text&&e.jsx("p",{className:C,children:r.text})]})}),e.jsxs("div",{className:"flex items-center gap-2 relative",children:[e.jsx("p",{className:k,htmlFor:"text",children:"Оценка:"}),e.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[e.jsx("div",{className:" cursor-pointer",children:e.jsx("svg",{onClick:()=>l.setFieldValue("rating",1),className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:l.values.rating>=1?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})}),e.jsx("div",{className:"cursor-pointer",children:e.jsx("svg",{onClick:()=>l.setFieldValue("rating",2),className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:l.values.rating>=2?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})}),e.jsx("div",{className:"cursor-pointer",children:e.jsx("svg",{onClick:()=>l.setFieldValue("rating",3),className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:l.values.rating>=3?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})}),e.jsx("div",{className:"cursor-pointer",children:e.jsx("svg",{onClick:()=>l.setFieldValue("rating",4),className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:l.values.rating>=4?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})}),e.jsx("div",{className:"cursor-pointer",children:e.jsx("svg",{onClick:()=>l.setFieldValue("rating",5),className:"w-4 h-4 text-yellow-300","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:l.values.rating>=5?"gold":"#dadada",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})})}),r.rating&&e.jsx("p",{className:`${C} left-[-23px] bottom-[-15px]`,children:r.rating})]})]}),e.jsxs("div",{className:"flex flex-col justify-between relative items-center gap-2",children:[e.jsx("label",{className:k,htmlFor:"extraPhotos",children:"Прикрепить фото:"}),e.jsx("input",{className:"w-full",type:"file",id:"extraPhotos",name:"extraPhotos",accept:"image/jpeg, image/png",multiple:!0,onChange:s=>{const d=s.target.files;l.setFieldValue("extraPhotos",d)}}),r.extraPhotos&&e.jsx("p",{className:`${C} left-[-20px] bottom-[-20px]`,children:r.extraPhotos})]})]}),e.jsx("div",{className:" smOnly:flex smOnly:flex-col smOnly:items-center smOnly:gap-2 } mt-12 ",children:c?e.jsx("div",{children:"Loading"}):e.jsxs("button",{type:"submit",disabled:!1,className:`"Frame36 hover:blue-gradient hover:text-white smOnly:h-10 h-10 px-5 py-2 rounded-3xl border-2 border-blue justify-center items-center gap-2 inline-flex  text-blue text-base font-bold font-['Manrope'] tracking-wide"`,children:["Добавить"," "]})})]})})})]})},me="pl-4 absolute  text-rose-500 text-xs font-normal top-18 left-[0px] xl:left-[85px]",he="text-neutral-900 text-sm font-semibold font-['Manrope'] tracking-wide mdOnly:text-[16px] ",pe=({onCloseModal:t,reviewId:h})=>{const o=m(P),n=N(),c=m(R),i=m(_);x.useEffect(()=>{i&&(t(),n($()))},[i,t,n]);const l=z({initialValues:{author:`${o.name} ${o.surname}`||"",comment:""},validateOnChange:!1,validateOnBlur:!0,onSubmit:({author:f,comment:s})=>{n(G({reviewId:h,post:{comment:s,author:f}}))}}),r=l.errors,p=l.values;return e.jsxs("div",{className:" text-center smOnly:px-3 md:px-5 rounded-3xl",children:[e.jsx("h3",{className:"text-neutral-900 text-2xl mb-11 font-medium font-['Manrope'] tracking-wide ",children:"Ответить"}),e.jsx("div",{className:"",children:e.jsx("form",{noValidate:!0,autoComplete:"off",className:"flex flex-col flex-wrap-reverse",onSubmit:l.handleSubmit,children:e.jsxs("div",{className:"flex-row-reverse w-[275px] md:w-[500px]",children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx("div",{className:"flex-col",children:e.jsxs("div",{className:"flex flex-col gap-2 justify-start w-full relative",children:[e.jsx("label",{className:he,htmlFor:"comment",children:"Комментарий:"}),e.jsx("textarea",{className:`flex w-[100%] h-[200px] px-[16px] py-[8px] border border-blue rounded-[10px] resize-none ${r.comment&&"border-rose-400"}`,type:"comment",id:"comment",name:"comment",placeholder:"Введите отзыв",value:p.comment,onChange:l.handleChange}),r.comment&&e.jsx("p",{className:me,children:r.comment})]})})}),e.jsx("div",{className:" smOnly:flex smOnly:flex-col smOnly:items-center smOnly:gap-2 } mt-12 ",children:c?e.jsx("div",{children:"Loading"}):e.jsxs("button",{type:"submit",disabled:!1,className:`"Frame36 hover:blue-gradient hover:text-white smOnly:h-10 h-10 px-5 py-2 rounded-3xl border-2 border-blue justify-center items-center gap-2 inline-flex  text-blue text-base font-bold font-['Manrope'] tracking-wide"`,children:["Добавить"," "]})})]})})})]})},ue=({productId:t})=>{const h=N(),o=m(H),n=m(R),[c,i]=x.useState(!1),[l,r]=x.useState(!1),[p,f]=x.useState(!1),[s,d]=x.useState(""),[u,v]=x.useState(null),j=()=>{i(!c)},w=g=>{v(g),f(!p)},a=g=>{d(g),r(!l)};x.useEffect(()=>{(!c||!l)&&h(J())},[h,c,l]);const L=(g=>g.filter(b=>b&&b.productId===t))(o);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"my-12 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl  font-bold tracking-tight text-gray-900 sm:text-3xl ",children:"Отзывы о товаре:"}),e.jsx("button",{onClick:j,className:"items-center shadow-sm max-w-[250px] rounded-md border border-transparent bg-lime-500 px-4 py-3 text-base font-medium text-white hover:bg-lime-600 focus:outline-none focus:ring-2 focus:ring-lime-600 focus:ring-offset-2",children:"Оставить отзыв"})]}),n?e.jsxs("div",{className:"flex flex-col gap-5 animate-pulse",children:[e.jsx("div",{className:"w-full h-[200px] bg-slate-100"}),e.jsx("div",{className:"w-full h-[200px] bg-slate-100"})]}):e.jsx("div",{children:o&&L.length>0?e.jsx("ul",{className:"flex flex-col gap-4",children:L.map((g,b)=>g&&e.jsx("li",{className:b!==L.length-1?"border-b border-gray-200 pb-8 pt-8":"pb-4 pt-8",children:e.jsx(ce,{review:g,openCommentModal:a,openImageModal:w})},g._id||b))}):e.jsx("div",{className:" text-center p-10 text-gray-500",children:"Пока нет отзывов к этом товару"})})]}),e.jsx(I,{isOpen:c,onCloseModal:j,children:e.jsx(xe,{onCloseModal:j,productId:t})}),e.jsx(I,{isOpen:l,onCloseModal:a,children:e.jsx(pe,{onCloseModal:a,reviewId:s})}),e.jsx(K,{isOpen:p,onCloseModal:w,children:e.jsx(Q,{image:u})})]})},je=()=>{const{id:t}=B(),{category:h}=B(),o=N(),n=m(X),c=m(Y),i=m(ee),[l,r]=x.useState("roll"),[p,f]=x.useState(null);x.useEffect(()=>{o(se())},[o]);const s=n.find(a=>a._id===t),d=n.filter(a=>a._id!==s._id).filter(a=>a.name===s.name).filter(a=>a.category===s.category).filter(a=>a.color!==s.color),[u,v]=x.useState(1),j=a=>{a.preventDefault();const y={id:s._id,count:u,product:s,type:l};o(re(y))},w=a=>{a.preventDefault(o(ne(s._id)))};return e.jsxs("div",{className:"container",children:[!c&&s&&e.jsx(te,{name:s.name}),!c&&s?e.jsxs("div",{className:"pt-6",children:[e.jsx("div",{className:"",children:e.jsx(ie,{images:[s.mainPhoto,...s.extraPhotos],id:s._id,name:s.name})}),e.jsxs("div",{className:"mx-auto max-w-2xl px-4 pt-10 sm:px-6 lg:grid lg:max-w-7xl lg:grid-cols-3 lg:grid-rows-[auto,auto,1fr] lg:gap-x-8 lg:px-8 lg:pt-16",children:[e.jsx("div",{className:"lg:col-span-2 lg:border-r lg:border-gray-200 lg:pr-8",children:e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl",children:s.name})}),e.jsxs("div",{className:"mt-4 lg:row-span-3 lg:mt-0",children:[e.jsx("h2",{className:"sr-only",children:"Product information"}),s.category!=="Фурнитура"&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 xl:grid-cols-3 gap-2 mb-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"roll",className:"peer hidden",name:"framework",defaultChecked:!0,onChange:()=>{r("roll"),f(s.price)}}),e.jsxs("div",{className:"hover:bg-gray-50 flex items-center justify-between px-4 py-2 border-2 rounded-lg cursor-pointer text-sm border-gray-200 group peer-checked:border-blue-500",children:[e.jsx("h2",{className:"font-medium text-gray-700",children:"Рулон"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"green",className:"w-9 h-9 text-blue-600 invisible group-[.peer:checked+&]:visible",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"1",className:"peer hidden",name:"framework",disabled:s.pricePerMeter&&s.pricePerMeter<0||!s.pricePerMeter,onChange:()=>{r("meter"),f(s.pricePerMeter||0)}}),e.jsxs("div",{className:`hover:bg-gray-50 flex items-center justify-between px-4 py-2 border-2 rounded-lg cursor-pointer text-sm border-gray-200 group peer-checked:border-blue-500 ${s.pricePerMeter&&s.pricePerMeter>0||!s.pricePerMeter&&"opacity-50"}`,children:[e.jsx("h2",{className:"font-medium text-gray-700",children:"Метраж"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"green",className:"w-9 h-9 text-blue-600 invisible group-[.peer:checked+&]:visible",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-900  mb-4",children:"Стоимость:"}),e.jsx(le,{discount:s.discount||0,price:p||s.price}),e.jsxs("form",{className:"mt-10",children:[d&&d.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900  mb-4",children:"Расцветки и варианты:"}),e.jsx("div",{className:"flex flex-wrap gap-4 ",children:d?d.map(a=>e.jsx(ae,{to:`/categories/${h}/${a._id}`,className:"w-14 h-14 flex justify-center items-center overflow-hidden",children:e.jsx("img",{className:"w-[50px] h-[50px]  rounded-[90px]  object-cover",src:a.mainPhoto,alt:a.name})},a._id)):e.jsx("div",{children:"Loading"})})]}),i&&i.some(a=>a.id===s._id)?e.jsxs("p",{className:"mt-10",children:[e.jsxs("span",{className:"font-bold ",children:[s.name," "]})," уже в Вашей корзине"]}):e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Количество"})}),e.jsxs("div",{className:"custom-number-input h-10 w-32 pt-2",children:[e.jsx("label",{htmlFor:"custom-input-number",className:"w-full text-gray-700 text-sm font-semibold"}),e.jsxs("div",{className:"shadow-sm flex flex-row h-10 w-full rounded-lg relative bg-transparent mt-1",children:[e.jsx("button",{onClick:a=>{a.preventDefault(),u!==1&&v(u-1)},"data-action":"decrement",className:" bg-gray-300 text-gray-600 hover:text-gray-700 hover:bg-gray-400 h-full w-20 rounded-l cursor-pointer outline-none",children:e.jsx("span",{className:"m-auto text-2xl font-thin",children:"−"})}),e.jsx("div",{type:"number",className:"flex justify-center items-center pointer-events-none focus:outline-none text-center w-full bg-gray-300 font-semibold text-md hover:text-black focus:text-black  md:text-basecursor-default flex items-center text-gray-700  outline-none",children:u}),e.jsx("button",{onClick:a=>{a.preventDefault(),v(u+1)},"data-action":"increment",className:"bg-gray-300 text-gray-600 hover:text-gray-700 hover:bg-gray-400 h-full w-20 rounded-r cursor-pointer",children:e.jsx("span",{className:"m-auto text-2xl font-thin",children:"+"})})]})]})]}),i&&i.some(a=>a.id===s._id)?e.jsx("div",{children:e.jsx("button",{onClick:w,className:"mt-2 flex w-full items-center justify-center rounded-md border border-transparent bg-red px-8 py-3 text-base font-medium text-white hover:bg-red focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Убрать из корзины"})}):e.jsx("button",{onClick:j,type:"submit",className:" shadow-sm mt-10 flex w-full items-center justify-center rounded-md border border-transparent bg-indigo-600 px-8 py-3 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Добавить в корзину"})]})]}),e.jsx("div",{className:"py-10 lg:col-span-2 lg:col-start-1 lg:border-r lg:border-gray-200 lg:pb-16 lg:pr-8 lg:pt-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900  mb-4",children:"Описание:"}),e.jsx("div",{className:"space-y-6",children:e.jsx("p",{className:"text-base text-gray-900 ",children:s.description.split(`\r
`).map((a,y)=>e.jsxs("div",{children:[a,e.jsx("br",{})]},y))})})]})})]}),e.jsx(ue,{productId:s._id})]}):e.jsx("div",{children:e.jsx(oe,{})})]})};export{je as default};
